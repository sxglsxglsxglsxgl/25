:root {
  color-scheme: dark;
  --bg: #000;
  --fg: #f2f2f2;
  --muted: #a5a5a5;
  --line: #fff;

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);

  --burger-h: 64px;
  --burger-line-h: 3px;

  --transition-slow: 1000ms;
  --transition-med: 480ms;
}

/* Base */
* { box-sizing: border-box; }
html, body { height: 100%; overscroll-behavior: none; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  font-family: "SF Pro Display", "IBM Plex Mono", -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  letter-spacing: 0.02em;
}
body.is-locked, body.has-menu-open, body.is-menu-closing { overflow: hidden; }

/* Hero */
.hero {
  display: grid;
  place-items: center;
  min-height: 100svh;
  padding: max(24px, var(--safe-top)) max(24px, var(--safe-right))
           max(24px, var(--safe-bottom)) max(24px, var(--safe-left));
}
.hero__center { display: grid; gap: 12px; text-align: center; }
.hero__title {
  margin: 0;
  font-size: clamp(24px, 5.2vw, 60px);
  font-weight: 700;
  letter-spacing: 0.08em;
}
.hero__sub {
  min-height: 1.6em;
  font-size: clamp(13px, 2.2vw, 18px);
  color: var(--muted);
  letter-spacing: 0.12em;
  white-space: pre-wrap;
  border-right: 1px solid transparent;
}

/* Fixed full-width burger (lines animate) */
.burger-bar {
  position: fixed;
  top: calc(var(--safe-top) + 12px);
  right: calc(var(--safe-right) + 12px);
  width: 44px;
  height: 44px;
  margin: 0;
  padding: 0;
  border: 0;
  background: transparent;
  cursor: pointer;
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform: translateZ(0);
  contain: paint;
  transition: opacity var(--transition-med) ease-in-out, transform var(--transition-med) ease-in-out;
}
.burger-bar[data-active="1"] { opacity: 1; pointer-events: auto; }
.burger-bar__line {
  position: absolute;
  left: 6px;
  right: 6px;
  height: var(--burger-line-h);
  background: var(--line);
  opacity: 0;
  transform-origin: 50% 50%;
  transform: scaleX(0);
  border-radius: 2px;
}

/* --- Burger: 3 lines morph to X --- */
.burger-bar__line {
  transition:
    transform var(--transition-med) cubic-bezier(.2,.8,.2,1),
    opacity 320ms ease,
    top var(--transition-med) ease,
    bottom var(--transition-med) ease;
}

/* When menu is open, morph into an "X" */
body.has-menu-open .burger-bar__line:nth-child(1) {
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
}
body.has-menu-open .burger-bar__line:nth-child(2) {
  opacity: 0;
  transform: translateY(-50%) scaleX(0);
}
body.has-menu-open .burger-bar__line:nth-child(3) {
  bottom: auto;
  top: 50%;
  transform: translateY(-50%) rotate(-45deg);
}

/* Hover/Focus polish */
.burger-bar:focus-visible .burger-bar__line,
.burger-bar:hover .burger-bar__line {
  opacity: 1;
}


.burger-bar__line:nth-child(1) { top: 12px; }
.burger-bar__line:nth-child(2) { top: 50%; transform: translateY(-50%) scaleX(0); }
.burger-bar__line:nth-child(3) { bottom: 12px; }
@keyframes lineGrow { 0% { transform: scaleX(0); opacity: 0;} 50% { opacity: 1;} 100% { transform: scaleX(1); opacity: 1;} }
body.burger-animate .burger-bar__line:nth-child(1){ animation: lineGrow 520ms 120ms cubic-bezier(.2,.8,.2,1) forwards;}
body.burger-animate .burger-bar__line:nth-child(2){ animation: lineGrow 520ms 210ms cubic-bezier(.2,.8,.2,1) forwards;}
body.burger-animate .burger-bar__line:nth-child(3){ animation: lineGrow 520ms 300ms cubic-bezier(.2,.8,.2,1) forwards;}

/* Menu overlay */
.site-menu { position: fixed; inset: 0; display: grid; place-items: center; background: var(--bg); z-index: 9998;
  opacity: 0; pointer-events: none; transition: opacity var(--transition-med) ease-in-out; }
body.has-menu-open .site-menu, .site-menu.is-open { opacity: 1; pointer-events: auto; }
body.is-menu-closing .site-menu { opacity: 0; pointer-events: none; }
.site-menu__backdrop { position: absolute; inset: 0; }
.site-menu__container {
  width:100%; height:100svh;
  padding: max(24px, var(--safe-top)) clamp(24px, 6vw, 56px) max(24px, var(--safe-bottom));
  display:grid; place-items:center; color:var(--fg); background:transparent; outline:none;
}
.site-menu__list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap: clamp(16px, 3vw, 28px); align-items:center; justify-content:center; }
.site-menu__link{ color:var(--fg); text-decoration:none; letter-spacing:.14em; text-transform:uppercase; font-weight:400; font-size:clamp(1.1rem,4vw,2rem); opacity:.95; transition:opacity .22s ease, transform .22s ease; }
.site-menu__link:hover, .site-menu__link:focus-visible { opacity:1; transform: translateY(-2px); outline:none; }

/* Slides track */
.slides { position: relative; z-index: 1; height: 100svh; overflow: hidden; }
.slides__track { position: absolute; top:0; left:0; width:100%; height:100svh; will-change: transform; transform: translate3d(0,0,0); }
.slide { height:100svh; display:grid; place-items:center; text-align:center; }
.slide.reveal { opacity: 0; transform: translateY(8px); transition: opacity 420ms ease-in-out, transform 420ms ease-in-out; }
.slide.reveal.is-visible { opacity: 1; transform: translateY(0); }

/* Unified inner frame */
.frame {
  width: 100%;
  max-width: min(900px, 92vw);
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1fr;
  gap: clamp(12px, 2.5vw, 20px);
  padding: 0 clamp(16px, 5vw, 32px);
}
.hero .frame { place-items: center; text-align: center; }
.container { max-width: 900px; text-align: left; }
.container h2 { margin:0 0 12px 0; font-size: clamp(22px, 4.8vw, 42px); letter-spacing:.06em; }
.container p { margin:0; color:var(--muted); font-size:clamp(15px, 2.2vw, 18px); line-height:1.6; }

/* Dots */
.dots { position: fixed; left:max(12px, calc(var(--safe-left) + 8px)); top:50%; transform: translateY(-50%); display:grid; gap:10px; z-index:20;
  opacity: 0; pointer-events: none; transition: opacity var(--transition-med) ease-in-out;
}
body.burger-animate .dots, body:has(.burger-bar[data-active="1"]) .dots { opacity: 1; pointer-events: auto; }
.dots button { width:8px; height:8px; border-radius:50%; border:0; background:#3a3a3a; padding:0; cursor:pointer; }
.dots button[aria-current="true"] { background:#fff; transform: scale(1.1); }
.dots button:focus-visible { outline:2px solid #fff; outline-offset:3px; }

/* On small screens move dots to the right and add extra right padding for content */
@media (max-width:520px){
  .dots { left:auto; right:max(12px, calc(var(--safe-right) + 8px)); }
  .frame { padding-right: clamp(28px, 8vw, 48px); }
}

@media (prefers-reduced-motion: reduce) {
  .burger-bar {
  position: fixed;
  top: calc(var(--safe-top) + 12px);
  right: calc(var(--safe-right) + 12px);
  width: 44px;
  height: 44px;
  margin: 0;
  padding: 0;
  border: 0;
  background: transparent;
  cursor: pointer;
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform: translateZ(0);
  contain: paint;
  transition: opacity var(--transition-med) ease-in-out, transform var(--transition-med) ease-in-out;
}
  .slide.reveal { opacity: 1; transform: none; transition: none; }
}


/* === Burger precise alignment fix (2025-10-27) === */
:root {
  /* override thickness for crisp rendering */
  --burger-line-h: 2px;
  --burger-line-w: 24px;
  --burger-gap: 9px; /* distance from center to top/bottom bars */
}

/* Ensure button is perfectly square */
.burger-bar {
  width: 44px;
  height: 44px;
}

/* Centered, equal-length lines */
.burger-bar__line {
  position: absolute;
  left: 50%;
  width: var(--burger-line-w);
  height: var(--burger-line-h);
  margin-left: calc(var(--burger-line-w) / -2);
  background: var(--line);
  border-radius: 2px;
  opacity: 1;
  transform-origin: 50% 50%;
  will-change: transform, opacity, top;
  backface-visibility: hidden;
}

/* Baseline positions (three parallel lines) */
.burger-bar__line:nth-child(1) { top: calc(50% - var(--burger-gap)); }
.burger-bar__line:nth-child(2) { top: 50%; margin-top: calc(var(--burger-line-h) / -2); }
.burger-bar__line:nth-child(3) { top: calc(50% + var(--burger-gap) - var(--burger-line-h)); }

/* Smooth transitions */
.burger-bar__line {
  transition:
    transform var(--transition-med) cubic-bezier(.2,.8,.2,1),
    opacity 260ms ease,
    top var(--transition-med) ease;
}

/* Morph into X */
body.has-menu-open .burger-bar__line:nth-child(1) {
  top: 50%;
  transform: rotate(45deg);
}
body.has-menu-open .burger-bar__line:nth-child(2) {
  top: 50%;
  opacity: 0;
  transform: scaleX(0.5);
}
body.has-menu-open .burger-bar__line:nth-child(3) {
  top: 50%;
  transform: rotate(-45deg);
}

/* Optional entrance grow animation disabled for consistency */
body.burger-animate .burger-bar__line { animation: none !important; }



/* === Visibility fix: show burger in inactive state (2025-10-27) === */
.burger-bar { opacity: 1 !important; pointer-events: auto !important; }

/* Reset default line transforms so the icon is visible before open */
.burger-bar__line { opacity: 1 !important; transform: none !important; }

/* Ensure middle line is not collapsed by older rules */
.burger-bar__line:nth-child(2) {
  top: 50% !important;
  margin-top: calc(var(--burger-line-h) / -2) !important;
  transform: none !important;
}



/* === Stage timing: burger appears after intro, together with dots (2025-10-27) === */
body:not(.burger-animate) .burger-bar { opacity: 0 !important; pointer-events: none !important; }
body.burger-animate .burger-bar { opacity: 1 !important; pointer-events: auto !important; }
/* Dots already tied to .burger-animate in CSS */



/* === Mobile typography bump (only phones/tablets) — 2025-10-27 === */
@media (max-width: 768px) {
  .hero__title { font-size: clamp(28px, 6vw, 60px); }            /* was clamp(24px, 5.2vw, 60px) */
  .hero__sub   { font-size: clamp(15px, 2.6vw, 21px); }          /* was clamp(13px, 2.2vw, 18px) */

  .container h2 { font-size: clamp(25px, 5.5vw, 48px); }         /* was clamp(22px, 4.8vw, 42px) */
  .container p  { font-size: clamp(17px, 2.6vw, 21px); }         /* was clamp(15px, 2.2vw, 18px) */

  .site-menu__link { font-size: clamp(1.3rem, 4.6vw, 2.3rem); }  /* was clamp(1.1rem, 4vw, 2rem) */
}



/* === Mobile dots at bottom center (2025-10-27) === */
@media (max-width: 1023px) {
  .dots {
    position: fixed;
    left: 50%;
    right: auto;
    top: auto;
    bottom: calc(16px + env(safe-area-inset-bottom));
    transform: translateX(-50%);
    display: flex;
    flex-direction: row;
    gap: 10px;
    z-index: 20;
    /* visibility remains tied to .burger-animate */
  }
  .dots button {
    width: 8px;
    height: 8px;
  }
}

/* === Hero sub: Blur-in Focus effect (2025-10-27) === */
.hero__sub.is-blur-intro {
  filter: blur(12px);
  opacity: .2;
  transform: translateY(4px);
  will-change: filter, opacity, transform;
  animation: heroFocusIn 1400ms ease-out forwards;
}
@keyframes heroFocusIn {
  to {
    filter: blur(0);
    opacity: 1;
    transform: translateY(0);
  }
}



/* === Burger inside light circle (2025-10-29) === */
.burger-bar {
  background: #f7f7f7; /* почти белый, как у кружков */
  border-radius: 80%;
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.08);
}

.burger-bar__line {
  background: #1a1a1a; /* тёмные линии для контраста */
}


/* === Hero layout & responsive title (2025-11-15) === */
.hero__center {
  display: flex;
  flex-direction: column;
  gap: 18px;
  align-items: center;
  text-align: center;
}

/* Desktop: hero block is vertically centered by default (grid from base styles) */
/* Title + subline ordering: title above, sub below */
.hero__title {
  margin: 0;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: baseline;
  justify-content: center;
  gap: 0.35em;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  order: 1;
  white-space: nowrap;
}

.hero__title-main,
.hero__title-sub {
  font-size: clamp(32px, 6vw, 56px);
  line-height: 0.9;
}

/* Small lead-in line: placement + base style */
/* Small lead-in line: placement + base style */
.hero__sub {
  order: 2; /* on desktop "Born in St. Petersburg" goes under the title */
  min-height: 1.6em;
  font-size: clamp(13px, 2.2vw, 18px);
  color: var(--muted);
  letter-spacing: 0.18em;
  text-transform: uppercase;
  white-space: pre-wrap;
  border-right: 1px solid transparent;
}

/* Mobile layout tweaks */
@media (max-width: 768px) {
  /* Push hero block to the bottom of the viewport on phones */
  .hero {
    align-items: end;
  }

  .hero__center {
    transform: none;
  }

  /* On mobile the subline should be ABOVE the title */
  .hero__sub {
    order: 0;
  }

  .hero__title {
    order: 1;
  }

  /* Make "CLASSNOE" span almost full width of the screen */
  .hero__title-main {
    font-size: clamp(44px, 16vw, 64px);
    letter-spacing: 0.18em;
  }

  /* "MESTO" also large, same visual weight */
  .hero__title-sub {
    font-size: clamp(40px, 14vw, 60px);
  }
}

/* Desktop / tablet: no vertical offset */
@media (min-width: 769px) {
  .hero__center {
    transform: none;
  }
}

/* === Vertical dots on the left center (2025-11-15) === */
.dots {
  position: fixed;
  left: max(12px, calc(var(--safe-left) + 8px));
  right: auto;
  top: 50%;
  bottom: auto;
  transform: translateY(-50%);
  display: grid;
  flex-direction: column;
  gap: 10px;
}

/* Normalize dot buttons (works for both grid/flex) */
.dots button {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  border: 0;
  background: #3a3a3a;
  padding: 0;
  cursor: pointer;
}

.dots button[aria-current="true"] {
  background: #fff;
  transform: scale(1.1);
}


/* Mobile overrides for equal title sizes and left align */
@media (max-width: 768px) {
  .hero__center {
    align-items: flex-start !important;
    text-align: left !important;
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
  }

  /* On mobile, keep "Born in St. Petersburg" above the title (orders set in base CSS) */

  .hero__title {
    text-align: left !important;
    margin: 0;
    line-height: 1.05;
    word-break: break-word;
    white-space: normal;
    display: block;
  }

  .hero__title-main,
  .hero__title-sub {
    display: block;
    font-size: clamp(40px, 9vw, 64px) !important;
    letter-spacing: 0.12em !important;
  }

  .hero__sub {
    text-align: left !important;
  }
}

/* Mobile-only layout tweaks: move dots to the right, burger to bottom-right */
@media (max-width: 768px) {
  .dots {
    left: auto;
    right: max(12px, calc(var(--safe-right) + 12px));
    top: 50%;
    transform: translateY(-50%);
  }

  .burger-bar {
    top: auto;
    bottom: calc(var(--safe-bottom) + 16px);
    right: calc(var(--safe-right) + 16px);
  }
}
